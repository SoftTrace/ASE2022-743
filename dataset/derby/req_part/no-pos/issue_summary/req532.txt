factor common code generat class 
